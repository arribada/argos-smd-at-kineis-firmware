compiler:
  path: arm-none-eabi-gcc
  source_path: './CommonSrcLink/'
  unit_tests_path: &unit_tests_path 'unitTest/'
  build_path:      &build_path 'buildDir/'
  extra_source_path: 'Extra_Src_Dir/'
  options:
    - -c -mcpu=cortex-m4 -mthumb -mfpu=fpv4-sp-d16 -mfloat-abi=hard -Og -Wall -Wextra -Wimplicit-fallthrough=1 -Wno-unused-parameter -fdata-sections -Wtype-limits  -Wwrite-strings  -ffunction-sections -fstack-usage -g -gdwarf-2 -MMD -MP
  includes:
    prefix: '-I'
    items:
      - './CMock/src/'
      - './CMock/vendor/unity/src/'
      - 'buildDir/mocks/'
      - *unit_tests_path
      - 'Inc_Dir/'
      - 'Inc_Dir/Internals/'
      - 'Extra_Inc_Dir/'
      - 'Src_Dir/'
      - '../fw/Core/Inc'
      - '../fw/kineis_sw/'
      - '../fw/Drivers/STM32G4xx_HAL_Driver/Inc'
      - '../fw/Drivers/STM32G4xx_HAL_Driver/Inc/Legacy'
      - '../fw/Drivers/CMSIS/Device/ST/STM32G4xx/Include'
      - '../fw/Drivers/CMSIS/Include'

#dont forget to add '/' at the ent of the path where there is src to be built-tested
  defines:
    prefix: '-D'
    items:
      - __monitor
      - UNITY_INCLUDE_CONFIG_H
      - UNIT_TEST
      - UNIT_TEST_HW
      - CORE_CM4
      - STM32G491xx
      - USE_HAL_DRIVER
      - USE_LOCAL_PRINTF
      - USE_CMSIS_OS2
      - DEBUG
      - VERBOSE
      - FDCAN1
  object_files:
    prefix: '-o'
    extension: '.o'
    destination: *build_path
linker:
  path: arm-none-eabi-gcc
  options:
    - -mcpu=cortex-m4 -mthumb -mfpu=fpv4-sp-d16 -mfloat-abi=hard -specs=nano.specs -TunitTest/STM32G491CCUx_FLASH.ld  -lc -lm -lnosys -Wl,-Map=build.map,--cref  -Wl,--gc-sections
  includes:
    prefix: '-I'
    items:
  object_files:
    path: *build_path
    extension: '.o'
  bin_files:
    prefix: '-o'
    extension: '.elf'
    destination: *build_path
:cmock:
  :plugins:
     - :array
     - :callback
     - :ignore
     - :return_thru_ptr
     - :ignore_arg
     - :expect_any_args
  :strippables:
     - ['(.*)_callback(.*)','(.*)_event_handler(.*)']
  :ignore:
      :args_only
  :includes:
    - <stdlib.h>
    - <stdint.h>
  :mock_path: ./buildDir/mocks
  :mock_list:
colour: true
